# 云聊

**本软件基于开源软件：https://github.com/easy-swoole/demo/tree/3.x-chat 改造而成**

#### 一、架构与功能

###### 第一版架构：nginx+swoole+easyswoole+redis+mysql
     1.nginx，做服务代理
     2.swoole，底层双工通信
     3.easyswoole，作为上层开发框架，简化开发难度
     3.redis，记录临时聊天记录，维护登陆状态（sessionId，fd）
     4.mysql，实现客服服务信息身份鉴权
	 
###### 第一版实现：点对点聊天（普通）、广场聊天（一个普通的房间）
###### 第一版可支持的消息:
    1.文本消息
        1.1.返回文本信息，文本信息类型（短文本，简单列表，图文列表）
            1.1.1 短文本：纯文字类型
            1.1.2 简单列表
            1.1.3 图文列表
    ......
	

###### 系统包括客服系统（3），点对点聊天系统（2），广场聊天系统（1）


###### 全局：
    1.维护不同系统间的用户表信息
    2.进入聊天应用，获取个人信息
    3.进入聊天应用，获取当前渠道在线用户列表
    
###### 1.广场聊天系统
    <1>.发送广场文本聊天内容，投递到当前在线用户（ok）
    <2>.新用户上线，发送系统内通知（ok）
    <3>.用户离线，发送系统内通知（ok）
    
###### 2.点对点聊天系统（暂无好友关系）
    <1>.一对一发送文本消息，投递到目标用户（ok）
    <2>.新用户上线，投递到当前渠道在线用户（ok）
    <3>.用户离线，投递到当前渠道在线用户（ok）

###### 3.客服聊天系统
    <1>.特殊的点对点聊天，维护在线客服列表(TODO)
    <2>.维护在线用户列表(TODO)
    <3>.维护无人接待用户列表，主动推送到各客服[队列](TODO)
    <4>.用户离线(TODO)
    

#### 二、运行方式
    1.安装swoole
    2.composer install
    3.php easyswoole start
    4.http://domain.com:port 访问地址